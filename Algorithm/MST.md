# 그래프의 최소 비용 문제

## 최소 신장 트리 (MST)

- 그래프에서 최소 비용 문제
    1. 모든 정점을 연결하는 간선들의 가중치의 합이 최소가 되는 트리 : **MST**
    2. 두 정점 사이의 최소 비용의 경로 찾기 : **최단 거리**
 
- **신장 트리**
    - **n개의 정점**으로 이루어진 무방향 그래프에서 **n개의 정점과 n-1개의 간선**으로 이루어진 트리
    - 양방향으로 연결된 그래프 중 1. 모든 정점을 연결, 2. n이 3 이상일 경우, 사이클이 없는 (n개의 정점, n-1개의 간선) 트리

- 최소 신장 트리 (Minimum Spanning Tree)
    - **무방향 가중치** 그래프에서 신장 트리를 구성하는 간선들의 **가중치의 합이 최소**인 신장 트리
 
### MST 구현 방법

1. Prim 알고리즘 : 특정 **정점**을 기준으로 작은 것 신경 쓰기

- 하나의 정점에서 연결된 간선들 중 하나씩 선택하면서 MST를 만들어 가는 방식
    1. 임의의 정점 선택
    2. 선택한 정점과 인접하는 정점들 중 최소 비용의 간선이 존재하는 정점 선택
    3. 모든 정점이 선택될 때까지 위의 과정 반복
 
- 서로소인 2개의 집합 정보 유지
    - 트리 정점들 - MST를 만들기 위해 선택된 정점들
    - 비트리 정점들 - 선택되지 않은 정점들
 
- queue에 정점이 들어가 있는데, 가중치가 가장 작은 것부터 추출하기 ==> 우선 순위 큐 사용하기

2. Kruskal 알고리즘 : **간선**을 기준으로 작은 것 신경 쓰기

- 그리디적인 접근
- 간선을 하나씩 선택해서 MST를 찾는 알고리즘
    1. 최초, 모든 간선을 가중치에 따라 **오름차순으로 정렬**
    2. **가중치가 가장 낮은 간선**부터 선택하면서 트리를 증가시킴
        - 사이클이 존재하면 다음으로 가중치가 낮은 간선 선택
        - 두 대표자가 다르다면, 엣지를 최소 비용 집합에 추가
        - 두 대표자가 같다면, 사이클이 생성되므로 무시한다.
    3. n-1개의 간선이 선택될 때까지 2.를 반복

※ 왜 그리디적인 접근일까?
    - 증명 : 귀류법 (증명하려는 명제의 반대가 참이라면, 명제의 반대에서 모순이 발생한다면 처음 가정이 틀린 것이기 때문에 원래 증명하려는 명제가 참이다.)  
        - 명제 : Kruskal 알고리즘으로 만든 트리 T는 최소 신장 트리이다.  
        - 반대 : ~~는 최소 신장 트리가 아니다.  
        => 1. 실제 어떠한 다른 최소 신장 트리(T*)가 존재함.  
        => 2. T* 에는 T에 없는 어떤 간선 e가 있어야 한다. (e : T* 의 최소 비용에 포함되고, T에는 포함되지 않은 간선)  
        => 3. e를 T에 추가하면 사이클이 생성된다. (T는 이미 신장 트리이기 때문에)  
        => 4. 결국 T에 e를 대신하는 어떤 간선 f가 존재함.  
        => 5. 실제로 T* 에 간선 e 대신 f를 적용하게 되면, T* 와 같거나 비용이 적은 신장 트리가 생성된다.  

## ※ Prim (정점 기준) vs. Kruskal (간선 기준)

- Prim의 시간 복잡도 : O((V+E)logV)
    - 보통 정점보다 간선이 더 많음 >> O(ElogV)
        - ElogV : E개의 간선을 우선순위 큐에 넣는 시간 => 힙 트리의 높이가 최적화를 하지 않아도 logE만큼 높아지지 않는다. => 그만큼 시간이 빨라진다.
        - 간선을 모두 고려하면서 우선순위 큐에 넣어야 한다.
        - **정점에 비해 간선의 수가 많을수록 유리하다.**
        - 최적화 :
      
- Kruskal의 시간 복잡도 : O(ElogE)
    - 간선 위주의 정렬하는 시간만 필요함.
        - 간선의 수가 많을 때만 유리함.

※ 정점에 비해 간선의 수가 많으면 prim이 유리하다.  
얼마나 있어야 유리할까?  
정점의 수 = V  
간선의 수 -      V       VlogV     V^2  
            간선 적음    적당함  간선 많음
